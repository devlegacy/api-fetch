!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToDoService=void 0;var o=n(4),r=n(5),i=function(){function t(){this.serviceURL=r.ApiConfig.BASE_URL+"/todos/",this.http=new o.HttpClient}return t.prototype.getAll=function(t){return void 0===t&&(t=20),this.http.get(this.serviceURL+"?_limit="+t)},t.prototype.find=function(){},t.prototype.create=function(t){return this.http.post(""+this.serviceURL,t)},t.prototype.update=function(t){return this.http.update(""+this.serviceURL+t.id,t)},t.prototype.destroy=function(t){return this.http.destroy(""+this.serviceURL+t.id)},t}();e.ToDoService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(3),i=n(6),c=n(8),s=function(){function t(){}return t.prototype.start=function(){console.log(">> Start app"),new o.NavBarComponent,new r.ToDoComponent({selector:"#to-do-container"}).render(),new i.CreateToDoComponent({selector:"#frm-create-post"}).render(),new c.UploadComponent({selector:"#frm-upload"})},t}();document.addEventListener("DOMContentLoaded",(function(){(new s).start()}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavBarComponent=void 0;var o=function(){var t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach((function(t){t.addEventListener("click",(function(){var e=t.dataset.target,n=document.getElementById(e);t.classList.toggle("is-active"),null==n||n.classList.toggle("is-active")}))}))};e.NavBarComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToDoComponent=void 0;var o=n(0),r=function(){function t(t,e){void 0===e&&(e=new o.ToDoService),this.options=t,this.toDoService=e,this.posts=[]}return t.prototype.render=function(){var t=this,e=document.querySelector(this.options.selector);e&&this.toDoService.getAll().then((function(n){t.posts=n,e.innerHTML=t.template(),null==e||e.addEventListener("click",(function(e){var n,o=e.target;if(o.classList.value.includes("content")){var r=o.querySelector(".content")||o;t.updateToDo(r)}else if(o.classList.value.startsWith("card-footer-item")){e.preventDefault();r=null===(n=o.closest("article"))||void 0===n?void 0:n.querySelector(".content");t.deleteToDo(r)}}))}))},t.prototype.template=function(){var t="";return this.posts.forEach((function(e){t+='\n        <div class="column is-12">\n          <article class="card">\n            <div class="card-content">\n              <div  class="content"\n                    data-id="'+e.id+'"\n                    data-title="'+e.title+"\"\n                    data-post='"+JSON.stringify(e)+"'>\n                "+e.title+'\n              </div>\n            </div>\n            <footer class="card-footer">\n              <a href="#" class="card-footer-item">Delete</a>\n            </footer>\n          </article>\n        </div>\n      '})),t},t.prototype.updateToDo=function(t){var e=this;t.addEventListener("blur",(function(t){var n=t.target,o=JSON.parse(n.dataset.post);o.title=n.innerText,e.toDoService.update(o),n.classList.remove("px-4","py-4"),n.contentEditable="false"}),{once:!0}),t.classList.add("px-4","py-4"),t.contentEditable="true",t.focus()},t.prototype.deleteToDo=function(t){var e,n=JSON.parse(t.dataset.post);this.toDoService.destroy(n),null===(e=t.closest("div.column"))||void 0===e||e.remove()},t}();e.ToDoComponent=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpClient=void 0;var o=function(){function t(){}return t.prototype.get=function(e){return t.configureRequest(e,"GET")},t.prototype.destroy=function(e){return t.configureRequest(e,"DELETE")},t.prototype.post=function(e,n){return void 0===n&&(n=null),t.configureRequest(e,"POST",n)},t.prototype.update=function(e,n){return void 0===n&&(n=null),t.configureRequest(e,"PUT",n)},t.configureRequest=function(t,e,n){return void 0===n&&(n=null),fetch(t,{method:e,headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"}}).then((function(t){return t.json()}))},t}();e.HttpClient=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApiConfig=void 0;var o=function(){function t(){}return t.BASE_URL="https://jsonplaceholder.typicode.com",t}();e.ApiConfig=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateToDoComponent=void 0;var o=n(0),r=n(7),i=function(){function t(t,e){void 0===e&&(e=new o.ToDoService),this.options=t,this.toDoService=e}return t.prototype.render=function(){var t=this,e=document.querySelector(this.options.selector);e&&e.addEventListener("submit",(function(n){var o;n.preventDefault();var i=e.querySelector("button"),c=e.querySelector("textarea");null===(o=c.closest(".control"))||void 0===o||o.classList.add("is-loading"),i.disabled=!0;var s=new r.Post(c.value);return t.toDoService.create(s).then((function(t){var e,n;null===(e=c.closest(".control"))||void 0===e||e.classList.remove("is-loading"),i.disabled=!1,c.value="",s.id=t.id;var o='\n          <article class="card">\n            <div class="card-content">\n              <div  class="content"\n                    data-id="'+s.id+'"\n                    data-title="'+s.title+"\"\n                    data-post='"+JSON.stringify(s)+"'>\n                "+s.title+'\n              </div>\n            </div>\n            <footer class="card-footer">\n              <a href="#" class="card-footer-item">Delete</a>\n            </footer>\n          </article>\n      ',r=document.createElement("div");r.classList.add("column","is-12"),r.innerHTML=o,null===(n=document.querySelector("#to-do-container"))||void 0===n||n.prepend(r)})),!1}))},t}();e.CreateToDoComponent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Post=void 0;var o=function(t){this.userId=0,this.id=0,this.title="",this.body="",this.title=t};e.Post=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadComponent=void 0;var o=function(t){this.options=t;var e=document.querySelector(this.options.selector),n=null==e?void 0:e.querySelector("#file");null==n||n.addEventListener("change",(function(t){var n=t.target.files;if(n&&n.length>0){var o=null==e?void 0:e.querySelector(".file-name");o&&(o.textContent=n[0].name)}})),null==e||e.addEventListener("submit",(function(t){t.preventDefault();var e=t.target,n=new FormData(e);return fetch(e.action,{method:"POST",body:n}).then((function(t){return t.text()})).then((function(t){return alert(t)})).catch((function(t){return console.error("[Upload fetch error]:",t.message)})),!1}))};e.UploadComponent=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlcnZpY2VzL3RvLWRvLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL25hdi1iYXIuY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RvZG8vdG8tZG8uY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9odHRwLWNsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnL2FwaS1jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdG9kby9jcmVhdGUtdG8tZG8uY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvcG9zdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy91cGxvYWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic2VydmljZVVSTCIsIkFwaUNvbmZpZyIsIkJBU0VfVVJMIiwidGhpcyIsImh0dHAiLCJIdHRwQ2xpZW50IiwiZ2V0QWxsIiwibGltaXQiLCJmaW5kIiwicG9zdCIsInVwZGF0ZSIsImlkIiwiZGVzdHJveSIsIlRvRG9TZXJ2aWNlIiwic3RhcnQiLCJjb25zb2xlIiwibG9nIiwiTmF2QmFyQ29tcG9uZW50IiwiVG9Eb0NvbXBvbmVudCIsInNlbGVjdG9yIiwicmVuZGVyIiwiQ3JlYXRlVG9Eb0NvbXBvbmVudCIsIlVwbG9hZENvbXBvbmVudCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkFwcCIsIiRuYXZiYXJCdXJnZXJzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJmb3JFYWNoIiwiZWwiLCJ0YXJnZXQiLCJkYXRhc2V0IiwiJHRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib3B0aW9ucyIsInRvRG9TZXJ2aWNlIiwicG9zdHMiLCIkZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aGVuIiwiaW5uZXJIVE1MIiwidGVtcGxhdGUiLCJlIiwiaW5jbHVkZXMiLCIkdG9kbyIsInVwZGF0ZVRvRG8iLCJzdGFydHNXaXRoIiwicHJldmVudERlZmF1bHQiLCJjbG9zZXN0IiwiZGVsZXRlVG9EbyIsInRpdGxlIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiaW5uZXJUZXh0IiwicmVtb3ZlIiwiY29udGVudEVkaXRhYmxlIiwib25jZSIsImFkZCIsImZvY3VzIiwidXJsIiwiY29uZmlndXJlUmVxdWVzdCIsImJvZHkiLCJtZXRob2QiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJyZXNwb25zZSIsImpzb24iLCIkZm9ybSIsIiRidXR0b24iLCIkdGl0bGUiLCJkaXNhYmxlZCIsIlBvc3QiLCJkYXRhIiwibmV3UG9zdCIsImNyZWF0ZUVsZW1lbnQiLCJwcmVwZW5kIiwidXNlcklkIiwiJGZpbGUiLCJmaWxlcyIsIiRmaWxlbmFtZSIsInRleHRDb250ZW50IiwiRm9ybURhdGEiLCJhY3Rpb24iLCJ0ZXh0IiwiYWxlcnQiLCJjYXRjaCIsImVyciIsImVycm9yIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6ImFBQ0Us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LHdCQUF5QkQsRUFBSUUsYUFFeEMsTUFyQ0EsRUFBQXpFIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICcuLi91dGlscy9odHRwLWNsaWVudCc7XG5pbXBvcnQgeyBBcGlDb25maWcgfSBmcm9tICcuLi9jb25maWcvYXBpLWNvbmZpZyc7XG5pbXBvcnQgeyBQb3N0IH0gZnJvbSAnLi4vbW9kZWxzL3Bvc3QnO1xuXG5leHBvcnQgY2xhc3MgVG9Eb1NlcnZpY2Uge1xuICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQ7XG4gIHByaXZhdGUgc2VydmljZVVSTDogc3RyaW5nID0gYCR7QXBpQ29uZmlnLkJBU0VfVVJMfS90b2Rvcy9gO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaHR0cCA9IG5ldyBIdHRwQ2xpZW50KCk7XG4gIH1cblxuICBnZXRBbGwobGltaXQ6IG51bWJlciA9IDIwKTogUHJvbWlzZTxBcnJheTxQb3N0Pj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KGAke3RoaXMuc2VydmljZVVSTH0/X2xpbWl0PSR7bGltaXR9YCk7XG4gIH1cblxuICBmaW5kKCkge31cblxuICBjcmVhdGUocG9zdDogUG9zdCkge1xuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChgJHt0aGlzLnNlcnZpY2VVUkx9YCwgcG9zdCk7XG4gIH1cblxuICB1cGRhdGUocG9zdDogUG9zdCkge1xuICAgIHJldHVybiB0aGlzLmh0dHAudXBkYXRlKGAke3RoaXMuc2VydmljZVVSTH0ke3Bvc3QuaWR9YCwgcG9zdCk7XG4gIH1cblxuICBkZXN0cm95KHBvc3Q6IFBvc3QpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlc3Ryb3koYCR7dGhpcy5zZXJ2aWNlVVJMfSR7cG9zdC5pZH1gKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmF2QmFyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL25hdi1iYXIuY29tcG9uZW50JztcbmltcG9ydCB7IFRvRG9Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvdG9kby90by1kby5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ3JlYXRlVG9Eb0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy90b2RvL2NyZWF0ZS10by1kby5jb21wb25lbnQnO1xuaW1wb3J0IHsgVXBsb2FkQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3VwbG9hZC5jb21wb25lbnQnO1xuXG5jbGFzcyBBcHAge1xuICBzdGFydCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnPj4gU3RhcnQgYXBwJyk7XG4gICAgbmV3IE5hdkJhckNvbXBvbmVudCgpO1xuICAgIG5ldyBUb0RvQ29tcG9uZW50KHsgc2VsZWN0b3I6ICcjdG8tZG8tY29udGFpbmVyJyB9KS5yZW5kZXIoKTtcbiAgICBuZXcgQ3JlYXRlVG9Eb0NvbXBvbmVudCh7IHNlbGVjdG9yOiAnI2ZybS1jcmVhdGUtcG9zdCcgfSkucmVuZGVyKCk7XG4gICAgbmV3IFVwbG9hZENvbXBvbmVudCh7IHNlbGVjdG9yOiAnI2ZybS11cGxvYWQnIH0pO1xuICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIG5ldyBBcHAoKS5zdGFydCgpO1xufSk7XG4iLCJleHBvcnQgY2xhc3MgTmF2QmFyQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gR2V0IGFsbCBcIm5hdmJhci1idXJnZXJcIiBlbGVtZW50c1xuICAgIGNvbnN0ICRuYXZiYXJCdXJnZXJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2YmFyLWJ1cmdlcicpLFxuICAgICAgMFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IG5hdmJhciBidXJnZXJzXG4gICAgaWYgKCRuYXZiYXJCdXJnZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEFkZCBhIGNsaWNrIGV2ZW50IG9uIGVhY2ggb2YgdGhlbVxuICAgICAgJG5hdmJhckJ1cmdlcnMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgLy8gR2V0IHRoZSB0YXJnZXQgZnJvbSB0aGUgXCJkYXRhLXRhcmdldFwiIGF0dHJpYnV0ZVxuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGVsLmRhdGFzZXQudGFyZ2V0O1xuICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpO1xuXG4gICAgICAgICAgLy8gVG9nZ2xlIHRoZSBcImlzLWFjdGl2ZVwiIGNsYXNzIG9uIGJvdGggdGhlIFwibmF2YmFyLWJ1cmdlclwiIGFuZCB0aGUgXCJuYXZiYXItbWVudVwiXG4gICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgJHRhcmdldD8uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBUb0RvU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3RvLWRvLnNlcnZpY2UnO1xuaW1wb3J0IHsgUmVuZGVyZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL2NvbXBvbmVudHMvcmVuZGVyZWQtY29tcG9uZW50JztcbmltcG9ydCB7IENvbXBvbmVudE9wdGlvbiB9IGZyb20gJy4uLy4uL2NvcmUvb3B0aW9ucy9jb21wb25lbnQtb3B0aW9uJztcbmltcG9ydCB7IFBvc3QgfSBmcm9tICcuLi8uLi9tb2RlbHMvcG9zdCc7XG5cbmV4cG9ydCBjbGFzcyBUb0RvQ29tcG9uZW50IGltcGxlbWVudHMgUmVuZGVyZWRDb21wb25lbnQge1xuICBwcml2YXRlIHBvc3RzOiBBcnJheTxQb3N0PiA9IFtdO1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG9wdGlvbnM6IENvbXBvbmVudE9wdGlvbixcbiAgICBwcml2YXRlIHRvRG9TZXJ2aWNlOiBUb0RvU2VydmljZSA9IG5ldyBUb0RvU2VydmljZSgpXG4gICkge31cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc3QgJGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5zZWxlY3Rvcik7XG4gICAgaWYgKCRlbGVtZW50KSB7XG4gICAgICB0aGlzLnRvRG9TZXJ2aWNlLmdldEFsbCgpLnRoZW4oKHBvc3RzOiBBcnJheTxQb3N0PikgPT4ge1xuICAgICAgICB0aGlzLnBvc3RzID0gcG9zdHM7XG4gICAgICAgICRlbGVtZW50IS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG5cbiAgICAgICAgLy8gRWRpdCB0ZXh0XG4gICAgICAgICRlbGVtZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcbiAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC52YWx1ZS5pbmNsdWRlcygnY29udGVudCcpKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0YXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgJHRvZG86IEhUTUxFbGVtZW50IHwgbnVsbCA9XG4gICAgICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpIHx8IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9EbygkdG9kbyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LnZhbHVlLnN0YXJ0c1dpdGgoJ2NhcmQtZm9vdGVyLWl0ZW0nKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgJHRvZG86IEhUTUxFbGVtZW50ID0gPEhUTUxFbGVtZW50PihcbiAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJ2FydGljbGUnKT8ucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlVG9EbygkdG9kbyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgbGV0IHRlbXBsYXRlOiBzdHJpbmcgPSAnJztcbiAgICB0aGlzLnBvc3RzLmZvckVhY2goKHBvc3Q6IFBvc3QpID0+IHtcbiAgICAgIHRlbXBsYXRlICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbiBpcy0xMlwiPlxuICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGVudFwiPlxuICAgICAgICAgICAgICA8ZGl2ICBjbGFzcz1cImNvbnRlbnRcIlxuICAgICAgICAgICAgICAgICAgICBkYXRhLWlkPVwiJHtwb3N0LmlkfVwiXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGl0bGU9XCIke3Bvc3QudGl0bGV9XCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1wb3N0PScke0pTT04uc3RyaW5naWZ5KHBvc3QpfSc+XG4gICAgICAgICAgICAgICAgJHtwb3N0LnRpdGxlfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGZvb3RlciBjbGFzcz1cImNhcmQtZm9vdGVyXCI+XG4gICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJjYXJkLWZvb3Rlci1pdGVtXCI+RGVsZXRlPC9hPlxuICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG5cbiAgdXBkYXRlVG9EbygkdG9kbzogSFRNTEVsZW1lbnQpIHtcbiAgICAkdG9kbyEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdibHVyJyxcbiAgICAgIChlOiBFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQ6IEhUTUxFbGVtZW50ID0gPEhUTUxFbGVtZW50PmUudGFyZ2V0O1xuICAgICAgICAvLyBjb25zb2xlLmRpcih0YXJnZXQuaW5uZXJUZXh0KTtcbiAgICAgICAgLy8gY29uc29sZS5kaXIodGFyZ2V0LmRhdGFzZXQuaWQpO1xuICAgICAgICAvLyBjb25zb2xlLmRpcihKU09OLnBhcnNlKDxzdHJpbmc+dGFyZ2V0LmRhdGFzZXQucG9zdCkpO1xuICAgICAgICBjb25zdCBwb3N0OiBQb3N0ID0gSlNPTi5wYXJzZSg8c3RyaW5nPnRhcmdldC5kYXRhc2V0LnBvc3QpO1xuICAgICAgICBwb3N0LnRpdGxlID0gdGFyZ2V0LmlubmVyVGV4dDtcbiAgICAgICAgdGhpcy50b0RvU2VydmljZS51cGRhdGUocG9zdCk7XG5cbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3B4LTQnLCAncHktNCcpO1xuICAgICAgICB0YXJnZXQuY29udGVudEVkaXRhYmxlID0gJ2ZhbHNlJztcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG9uY2U6IHRydWUsXG4gICAgICB9XG4gICAgKTtcbiAgICAkdG9kbyEuY2xhc3NMaXN0LmFkZCgncHgtNCcsICdweS00Jyk7XG4gICAgJHRvZG8hLmNvbnRlbnRFZGl0YWJsZSA9ICd0cnVlJztcbiAgICAkdG9kbyEuZm9jdXMoKTtcbiAgfVxuXG4gIGRlbGV0ZVRvRG8oJHRvZG86IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcG9zdDogUG9zdCA9IEpTT04ucGFyc2UoPHN0cmluZz4kdG9kby5kYXRhc2V0LnBvc3QpO1xuICAgIHRoaXMudG9Eb1NlcnZpY2UuZGVzdHJveShwb3N0KTtcbiAgICAkdG9kby5jbG9zZXN0KCdkaXYuY29sdW1uJyk/LnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgSHR0cENsaWVudCB7XG4gIGdldCh1cmw6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIEh0dHBDbGllbnQuY29uZmlndXJlUmVxdWVzdCh1cmwsICdHRVQnKTtcbiAgfVxuXG4gIGRlc3Ryb3kodXJsOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBIdHRwQ2xpZW50LmNvbmZpZ3VyZVJlcXVlc3QodXJsLCAnREVMRVRFJyk7XG4gIH1cblxuICBwb3N0KHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QgfCBudWxsID0gbnVsbCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIEh0dHBDbGllbnQuY29uZmlndXJlUmVxdWVzdCh1cmwsICdQT1NUJywgYm9keSk7XG4gIH1cblxuICB1cGRhdGUodXJsOiBzdHJpbmcsIGJvZHk6IG9iamVjdCB8IG51bGwgPSBudWxsKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gSHR0cENsaWVudC5jb25maWd1cmVSZXF1ZXN0KHVybCwgJ1BVVCcsIGJvZHkpO1xuICB9XG5cbiAgc3RhdGljIGNvbmZpZ3VyZVJlcXVlc3QoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgYm9keTogb2JqZWN0IHwgbnVsbCA9IG51bGxcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2QsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLFxuICAgICAgfSxcbiAgICB9KS50aGVuKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBcGlDb25maWcge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJBU0VfVVJMOiBzdHJpbmcgPVxuICAgICdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20nO1xufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50T3B0aW9uIH0gZnJvbSAnLi4vLi4vY29yZS9vcHRpb25zL2NvbXBvbmVudC1vcHRpb24nO1xuaW1wb3J0IHsgVG9Eb1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90by1kby5zZXJ2aWNlJztcbmltcG9ydCB7IFJlbmRlcmVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9jb21wb25lbnRzL3JlbmRlcmVkLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBQb3N0IH0gZnJvbSAnLi4vLi4vbW9kZWxzL3Bvc3QnO1xuXG5leHBvcnQgY2xhc3MgQ3JlYXRlVG9Eb0NvbXBvbmVudCBpbXBsZW1lbnRzIFJlbmRlcmVkQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBvcHRpb25zOiBDb21wb25lbnRPcHRpb24sXG4gICAgcHJpdmF0ZSB0b0RvU2VydmljZTogVG9Eb1NlcnZpY2UgPSBuZXcgVG9Eb1NlcnZpY2UoKVxuICApIHt9XG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCAkZm9ybTogSFRNTEZvcm1FbGVtZW50ID0gPEhUTUxGb3JtRWxlbWVudD4oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5zZWxlY3RvcilcbiAgICApO1xuICAgIGlmICgkZm9ybSkge1xuICAgICAgJGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgJGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgICAgICRmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0ICR0aXRsZTogSFRNTFRleHRBcmVhRWxlbWVudCA9IDxIVE1MVGV4dEFyZWFFbGVtZW50PihcbiAgICAgICAgICAkZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpXG4gICAgICAgICk7XG5cbiAgICAgICAgJHRpdGxlLmNsb3Nlc3QoJy5jb250cm9sJyk/LmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcbiAgICAgICAgJGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgcG9zdDogUG9zdCA9IG5ldyBQb3N0KCR0aXRsZS52YWx1ZSk7XG4gICAgICAgIHRoaXMudG9Eb1NlcnZpY2UuY3JlYXRlKHBvc3QpLnRoZW4oKGRhdGE6IFBvc3QpID0+IHtcbiAgICAgICAgICAkdGl0bGUuY2xvc2VzdCgnLmNvbnRyb2wnKT8uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuICAgICAgICAgICRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAkdGl0bGUudmFsdWUgPSAnJztcblxuICAgICAgICAgIHBvc3QuaWQgPSBkYXRhLmlkO1xuICAgICAgICAgIGxldCB0ZW1wbGF0ZTogc3RyaW5nID0gYFxuICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGVudFwiPlxuICAgICAgICAgICAgICA8ZGl2ICBjbGFzcz1cImNvbnRlbnRcIlxuICAgICAgICAgICAgICAgICAgICBkYXRhLWlkPVwiJHtwb3N0LmlkfVwiXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGl0bGU9XCIke3Bvc3QudGl0bGV9XCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1wb3N0PScke0pTT04uc3RyaW5naWZ5KHBvc3QpfSc+XG4gICAgICAgICAgICAgICAgJHtwb3N0LnRpdGxlfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGZvb3RlciBjbGFzcz1cImNhcmQtZm9vdGVyXCI+XG4gICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJjYXJkLWZvb3Rlci1pdGVtXCI+RGVsZXRlPC9hPlxuICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgYDtcbiAgICAgICAgICBsZXQgbmV3UG9zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIG5ld1Bvc3QuY2xhc3NMaXN0LmFkZCgnY29sdW1uJywgJ2lzLTEyJyk7XG4gICAgICAgICAgbmV3UG9zdC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG8tZG8tY29udGFpbmVyJyk/LnByZXBlbmQobmV3UG9zdCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQb3N0IHtcbiAgdXNlcklkOiBudW1iZXIgPSAwO1xuICBpZD86IG51bWJlciA9IDA7XG4gIHRpdGxlOiBzdHJpbmcgPSAnJztcbiAgYm9keTogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IodGl0bGU6IHN0cmluZykge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50T3B0aW9uIH0gZnJvbSAnLi4vY29yZS9vcHRpb25zL2NvbXBvbmVudC1vcHRpb24nO1xuXG5leHBvcnQgY2xhc3MgVXBsb2FkQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBvcHRpb25zOiBDb21wb25lbnRPcHRpb24pIHtcbiAgICBjb25zdCAkZm9ybTogSFRNTEZvcm1FbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLm9wdGlvbnMuc2VsZWN0b3JcbiAgICApO1xuXG4gICAgY29uc3QgJGZpbGUgPSA8SFRNTElucHV0RWxlbWVudD4kZm9ybT8ucXVlcnlTZWxlY3RvcignI2ZpbGUnKTtcbiAgICAkZmlsZT8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBmaWxlcyA9ICg8SFRNTElucHV0RWxlbWVudD5lLnRhcmdldCkuZmlsZXM7IC8vICRmaWxlcy5maWxlc1xuICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgJGZpbGVuYW1lID0gJGZvcm0/LnF1ZXJ5U2VsZWN0b3IoJy5maWxlLW5hbWUnKTtcbiAgICAgICAgaWYgKCRmaWxlbmFtZSkge1xuICAgICAgICAgICRmaWxlbmFtZS50ZXh0Q29udGVudCA9IGZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRmb3JtPy5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZTogRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHRhcmdldDogSFRNTEZvcm1FbGVtZW50ID0gPEhUTUxGb3JtRWxlbWVudD5lLnRhcmdldDtcblxuICAgICAgY29uc3QgYm9keSA9IG5ldyBGb3JtRGF0YSh0YXJnZXQpO1xuICAgICAgLy8gY29uc3QgZmlsZSA9ICg8SFRNTElucHV0RWxlbWVudD4kZm9ybS5xdWVyeVNlbGVjdG9yKCcjZmlsZScpKS5maWxlcztcbiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGUpO1xuICAgICAgLy8gaWYgKGZpbGUpIHtcbiAgICAgIC8vICAgYm9keS5hcHBlbmQoJ2ZpbGUnLCBmaWxlWzBdKTtcbiAgICAgIC8vIH1cblxuICAgICAgZmV0Y2godGFyZ2V0LmFjdGlvbiwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keSxcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgICAgLnRoZW4oKGRhdGE6IHN0cmluZykgPT4gYWxlcnQoZGF0YSkpXG4gICAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT5cbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbVXBsb2FkIGZldGNoIGVycm9yXTonLCBlcnIubWVzc2FnZSlcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==